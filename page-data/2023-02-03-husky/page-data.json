{"componentChunkName":"component---src-templates-blog-post-js","path":"/2023-02-03-husky/","result":{"data":{"site":{"siteMetadata":{"title":"Taiyi's Blog"}},"markdownRemark":{"id":"86374792-8b25-587c-80e8-c8bf3f3fa2d7","excerpt":"幫助使用者在commit階段做一些預先檢查，例如要通過測試才能commit, 程式碼排版, lint檢查等等。 安裝 插入shell script 在commit時,就會依照不同階段執行,等動作 中斷Commit檢查 怎麼運作的 husky install 在塞入  ( 或是查看), 將git hooks和husky…","htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"幫助使用者在commit階段做一些預先檢查，例如要通過測試才能commit, 程式碼排版, lint檢查等等。"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"安裝"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"yarn"}]},{"type":"text","value":" init "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# 產生package.json"}]},{"type":"text","value":"\nnpx husky-init "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# 產生.husky"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"yarn"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"install"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# 安裝husky相關套件"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"插入shell script"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"text","value":"npx husky "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"add"}]},{"type":"text","value":" .husky/pre-commit "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'echo \"pre-commit\"'"}]},{"type":"text","value":" \n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# 在.husky/pre-commit檔案插入後方指令。也可以直接修改pre-commit檔案"}]},{"type":"text","value":"\n\nnpx husky "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"add"}]},{"type":"text","value":" .husky/commit-msg "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'echo \"commit-msg\"'"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# 如果原本不存在commit-msg, 產生一個新的.husky/commit-msg"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"在commit時,就會依照不同階段執行"},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"pre-commit"}]},{"type":"text","value":","},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"commit-msg"}]},{"type":"text","value":"等動作"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"git"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"add"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","builtin","class-name"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"git"}]},{"type":"text","value":" commit -m "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"feat: add pre-commit hooks\""}]},{"type":"text","value":"             \npre-commit\ncommit-msg\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"master af64edc"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" feat: "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"add"}]},{"type":"text","value":" pre-commit hooks\n "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"file"}]},{"type":"text","value":" changed, "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"text","value":" insertion"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"+"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":", "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"text","value":" deletion"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"-"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"中斷Commit檢查"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"shell"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","builtin","class-name"]},"children":[{"type":"text","value":"exit"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# 執行到這行會跳出,不能commit"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"怎麼運作的"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"husky install"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"在"},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":".husky/.git/config"}]},{"type":"text","value":"塞入"},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"hooksPath=.husky"}]},{"type":"text","value":"  ("},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"git config -e"}]},{"type":"text","value":" 或是"},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"git config --get core.hooksPath"}]},{"type":"text","value":"查看), 將git hooks和husky做連動"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"在"},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":".husky"}]},{"type":"text","value":"目錄下會有一些檔案例如"},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"pre-commit"}]},{"type":"text","value":","},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"commit-msg"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"對應到不同生命週期執行對應的shell檔案, 名稱好像不能自己定?, 要依據"},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":".git/hooks"}]},{"type":"text","value":"裡面給的範例命名, e.g. "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"commit-msg"}]},{"type":"text","value":","},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"post-update"}]},{"type":"text","value":","},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"prepare-commit-msg"}]},{"type":"text","value":",…"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Reference"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://typicode.github.io/husky/#/"},"children":[{"type":"text","value":"typicode - husky"}]}]},{"type":"text","value":"\n"}]}],"data":{"quirksMode":false}},"frontmatter":{"title":"Husky","date":"February 03, 2023","description":null,"lastUpdate":null}}},"pageContext":{"slug":"/2023-02-03-husky/","previous":{"fields":{"slug":"/2023-01-16-Vscode/"},"frontmatter":{"title":"常用快捷鍵"}},"next":{"fields":{"slug":"/2023-03-02-publish-to-gitlab/"},"frontmatter":{"title":"將UI元件庫發佈到Gitlab上"}}}},"staticQueryHashes":["1990145124","2841359383"]}